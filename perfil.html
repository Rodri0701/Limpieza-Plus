<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil de Usuario</title>
</head>
<body>
  <!-- Botón de Página Principal -->
  <button onclick="irAPrincipal()">Página Principal</button>
  <h1>Perfil de Usuario</h1>
  <div id="user-info"></div>

  <!-- Botón de Cerrar Sesión -->
  <button onclick="cerrarSesion()">Cerrar Sesión</button>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Obtener el ID del usuario del localStorage
      const userId = localStorage.getItem('usuarioId');

      // Cargar el archivo JSON externo
      fetch('data/usuarios.json')
        .then(response => response.json())
        .then(data => {
          // Buscar el usuario por su ID
          const user = data.customer.find(user => user.id === parseInt(userId));

          if (user) {
            // Mostrar la información del usuario en el HTML
            const userInfoDiv = document.getElementById('user-info');
            userInfoDiv.innerHTML = `
              <p><strong>Nombre:</strong> ${user.nombre}</p>
              <p><strong>Usuario:</strong> ${user.usuario}</p>
              <p><strong>Correo Electrónico:</strong> ${user.correo_electronico}</p>
              <p><strong>Dirección:</strong> ${user.calle}, ${user.fraccionamiento}, ${user.codigo_postal}</p>
              <p><strong>Método de Pago:</strong> ${user.metodo_pago}</p>
            `;
          } else {
            // Si no se encuentra el usuario, mostrar un mensaje de error
            const userInfoDiv = document.getElementById('user-info');
            userInfoDiv.innerHTML = '<p>Error: Usuario no encontrado</p>';
          }
        })
        .catch(error => {
          // Manejar errores de carga del JSON
          console.error('Error al cargar el archivo JSON:', error);
          const userInfoDiv = document.getElementById('user-info');
          userInfoDiv.innerHTML = '<p>Error: No se pudo cargar la información del usuario</p>';
        });
    });

    // Función para cerrar la sesión
    function cerrarSesion() {
      // Eliminar el valor del ID de usuario del localStorage
      localStorage.removeItem('usuarioId');
      // Redirigir al usuario a la página de inicio de sesión
      window.location.href = 'Princi.html';
    }

    // Función para redirigir a la página principal
    function irAPrincipal() {
      window.location.href = 'Princi.html';
    }
  </script>
</body>
</html>
